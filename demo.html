<html lang="en"><head>
    <meta charset="utf-8">
    <title>Rich Autocomplete Demo Test</title>
    <meta content="authenticity_token" name="csrf-param">
	<meta content="rHsRWOUZG28i3HwdfzBvpvOJWRhI6+somFuGPSDx7E4=" name="csrf-token">
    <link href="./src/rich_autocomplete.scss" media="all" rel="stylesheet" type="text/css">
        <link href="./lib/jquery-ui-1.10.0.custom.min.css" media="all" rel="stylesheet" type="text/css">
        <style>
        	.container { width: 970px; }
        	input { width: 550px; /*display: block !important;*/}
        	.input-wrapper { width: 550px; }
        	.ui-autocomplete {
		  background: #fff;
		  border: 1px solid #ccc;
		  border-top: none;
		  -webkit-border-radius: 0px 0px 3px 3px;
		  border-radius: 0px 0px 3px 3px;
		  }
		  .ui-state-focus {
		    border: 1px solid #ccc;
		    background: #eee;
		    -webkit-border-radius: 3px;
		    border-radius: 3px;
		  }
		  
		  .additional-info { width: 38px; float: right; margin-right: 25px; }
		  select.additional-info { width: auto; }
        </style>
     </head>
  <body>
  	<div class="container">
	<form>
		<h1>Rich Autocomplete</h1>
		
		<h2>Demo #1 - Multiple Select</h2>
			<div class="input-wrapper">
				<input class="ra-input" data-ra-multiple="true" 
				data-ra-selected="[]" name="imovel[proprietario_ids]" type="text" 
				value="[]">
			</div>
		
		<h2>Demo #2 - Multiple select with already selected data</h2>
			<div class="input-wrapper">
				<input class="ra-input" data-ra-multiple="true" 
				data-ra-selected='[{ "label": "Samara Felippo", "value": 5, "desc": "Pessoa muito interessante"}, { "label": "Stella Artois", "value": 6, "desc": "Pessoa muito interessante"}]' type="text" 
				value="[]">
			</div>
			
		<h2>Demo #3 - Single select</h2>
			<div class="input-wrapper">
				<input class="ra-input"
				data-ra-selected="" name="imovel[proprietario_id]" type="text" 
				value="">
			</div>
		
		<h2>Demo #4 - Single select with previously selected data</h2>
			<div class="input-wrapper">
				<input class="ra-input"
				data-ra-selected='{ "label": "Samara Felippo", "value": 5, "desc": "Pessoa muito interessante"}' name="imovel[proprietario_id]" type="text" 
				value="[]">
			</div>
			
		<h2>Demo #5 - Multiple select with additional input!</h2>
			<div class="input-wrapper" id="demo5">
				<input class="" data-ra-multiple="true"
				data-ra-selected='[{ "label": "Samara Felippo", "value": 5, "desc": "Pessoa muito interessante", "percentage": "12%"}, { "label": "Stella Artois", "value": 6, "desc": "Pessoa muito interessante", "percentage": "32%"}]' type="text" 
				value="[]">
			</div>
		<h2>Demo #6 - Multiple select (accepts duplicated values) and additional select field, without selected description!</h2>
			<div class="input-wrapper" id="demo6">
				<input class="" data-ra-multiple="true" data-ra-multiple-unique="false" data-ra-display-selected-description="false"
				data-ra-selected='[{ "label": "Samara Felippo", "value": 5, "desc": "Pessoa muito interessante", "sex": "F"}, { "label": "Stella Artois", "value": 6, "desc": "Pessoa muito interessante", "sex": "M"}]' type="text" 
				value="[]">
			</div>
			
		<h2>Demo #7 - Multiple select (accepts duplicated values), additional select fields and additional actions!</h2>
			<div class="input-wrapper" id="demo7">
				<input class="" data-ra-multiple="true" data-ra-multiple-unique="false" data-ra-display-selected-description="false
				data-ra-selected='[{ "label": "Samara Felippo", "value": 5, "desc": "Pessoa muito interessante", "sex": "F"}, { "label": "Stella Artois", "value": 6, "desc": "Pessoa muito interessante", "sex": "M"}]' type="text" 
				value="[]">
				<a href="#">+ Add new User</a>
			</div>
		</form>
	</div>	
	
	//TODO when accepting duplicate selections, when user removes a selected item, we must make sure what item we're going to hide
    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="./lib/jquery.js" type="text/javascript"></script>
    <script src="./lib/jquery-ui-1.10.0.custom.min.js" type="text/javascript"></script>
    <script src="./src/rich_autocomplete.js" type="text/javascript"></script>

	<script type="text/javascript">
		$("input.ra-input").richAutocomplete({ 
			source: [{ label: "Maria Joana", value: 1, desc: "Pessoa muito interessante"},
				{ label: "Marta Pereira", value: 2, desc: "Pessoa muito interessante"},
				{ label: "Ricardo Pereira", value: 4, desc: "Pessoa muito interessante"},
				{ label: "Samara Felippo", value: 5, desc: "Pessoa muito interessante"},
				{ label: "Stella Artois", value: 6, desc: "Pessoa muito interessante"},
				{ label: "Cibele Gomes", value: 7, desc: "Pessoa muito interessante"},
				{ label: "Maria Mônica", value: 8, desc: "Pessoa muito interessante"}
			]
		});
		
		$("#demo5 input").richAutocomplete({
			source: [{ label: "Maria Joana", value: 1, desc: "Pessoa muito interessante"},
				{ label: "Marta Pereira", value: 2, desc: "Pessoa muito interessante"},
				{ label: "Ricardo Pereira", value: 4, desc: "Pessoa muito interessante"},
				{ label: "Samara Felippo", value: 5, desc: "Pessoa muito interessante"},
				{ label: "Stella Artois", value: 6, desc: "Pessoa muito interessante"},
				{ label: "Cibele Gomes", value: 7, desc: "Pessoa muito interessante"},
				{ label: "Maria Mônica", value: 8, desc: "Pessoa muito interessante"}
			],
			additionalInput: { input: $select, parameters: { name: "percentage_for_%s" }, attributeName: "percentage" }
		});
		
		var $select = $("<select>", {
					name: "sex_for_%s",
					type: "text"
				});
			
			$("<option value='F'> Female </option>").appendTo($select);
			$("<option value='M'> Male </option>").appendTo($select);
			
		$("#demo6 input").richAutocomplete({
			source: [{ label: "Maria Joana", value: 1, desc: "Pessoa muito interessante"},
				{ label: "Marta Pereira", value: 2, desc: "Pessoa muito interessante", sex: "M"},
				{ label: "Ricardo Pereira", value: 4, desc: "Pessoa muito interessante"},
				{ label: "Samara Felippo", value: 5, desc: "Pessoa muito interessante"},
				{ label: "Stella Artois", value: 6, desc: "Pessoa muito interessante"},
				{ label: "Cibele Gomes", value: 7, desc: "Pessoa muito interessante"},
				{ label: "Maria Mônica", value: 8, desc: "Pessoa muito interessante"}
			],
			additionalInput: { input: $select, attributeName: "sex" }
		});
		
		$("#demo7 input").richAutocomplete({
			source: [{ label: "Maria Joana", value: 1, desc: "Pessoa muito interessante"},
				{ label: "Marta Pereira", value: 2, desc: "Pessoa muito interessante", sex: "M"},
				{ label: "Ricardo Pereira", value: 4, desc: "Pessoa muito interessante"},
				{ label: "Samara Felippo", value: 5, desc: "Pessoa muito interessante"},
				{ label: "Stella Artois", value: 6, desc: "Pessoa muito interessante"},
				{ label: "Cibele Gomes", value: 7, desc: "Pessoa muito interessante"},
				{ label: "Maria Mônica", value: 8, desc: "Pessoa muito interessante"}
			],
			additionalInput: { input: $select, attributeName: "sex" }
		});
		
		$("#demo7 a").click(function(evt) {
			var tmp = {label: "João José", value: 3, sex: "M", desc: "Pessoa interessante adicionada posteriormente" };
			$(this).parent().find('.ra-input').richAutocomplete("select", tmp);
			evt.preventDefault();
		});
		</script>
</body></html>